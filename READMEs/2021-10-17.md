# 2021-10-17

## Player-Item 상호작용 #3

클래스 BaseItem 생성, 아래는 BaseItem을 상속 받는 클래스이자 ItemType으로 분류된다. BaseItem은 시간이 지나면 사라질 수 있음을 의미한다. 소유 여부를 추적할 수 있다.

- 총알류
  - ~~Bullet~~
- 무기류
  - ~~BaseBulletGun~~
- 아이템류
  - ~~SpeedUpBoxItem~~
  - PowerUpBoxItem(미구현)
  - BarrierBoxItem(미구현)
  - DibuffBoxItem(미구현)
  - HealBoxItem(미구현)

아이템은 랜덤으로 풀링 매니저가 일정 시간마다 맵에 생성, 문제는 플레이어에게 적용하는 방식이다.



2021-10-17 추가 사항

- 개별로 하나씩 클래스를 생성해서 플레이어에게 적용할 생각이다.



## WaveManager #2

~~ObjectPoolingManager에 이름이 같은 오브젝트들은 웨이브에 등록해두면 생성됨. 웨이브가 다른데 동시에 실행이 되는 버그가 있음~~

2021-10-17 추가 

- 해결했다. 
- WaveManager가 ObjectPoolingManager와 하는 일이 비슷하기 때문에 WaveManager를 없애고 ObjectPoolingManger에서 했던 일들을 넘겨줬다.
- 주의사항이 하나 생겼다. 오브젝트 풀링의 양을 ObjectPoolingManager에서 사전에 등록한 최대 수를 넘을 수 없어야 한다. 
  - 예를 들어 InfestedTerran의 초기 풀링 양을 100이라 했을 때, 웨이브를 통해 생성되도록 하는 수를 모두 합해 100이 넘지 않도록 해야한다는 것이다. 이는 메모리 부족 현상을 예방하기 위해서이다. 만약 오브젝트 생성을 자주하게 되면 메모리 상에서 계속 상주하는 쓰이지 않는 오브젝트가 너무 많아지는 것을 우려해서 하게 됐다.



## Map(Geometry) 생성

일종의 맵을 생성하고 안에서 생성되는 몬스터들을 제한 시간동안 살아남는 것이 게임의 목표임.

- 카메라가 사방의 벽을 너머로 볼 수 없게 제한을 걸어뒀다. 
- 플레이어가 벽에 부딪히면 움직일 수 없게 제한을 걸어뒀다. (실패함.. 무슨 이유로?)
- 2021-10-17 추가 
  - 움직이는 물체는 Rigidbody와 BoxCollider를 갖고 있어야 하고 Block이 되기 위해선 부딪히는 물체의 BoxCollider 트리거를 꺼야한다.
  - 물리적인 힘이라 그런지 어느정도 속도가 넘으면 물체를 지나가버린다. 그래서 속도를 한계치 이상으로 올릴 수 없도록 해놓는 것으로 해놨으나 완벽하진 않아 아쉽다. 자세하게 구글링해봐야한다.



## Lighting

시범적으로 추가한 것인데 분위기를 바꾸기 위해서 전체적으로 어둡게 설정했다. Window - Rendering - Lighting 에서 수정했다. 손전등 마냥 앞에 벽이 있어도 빛이 넘어가는데 어떻게 수정할까 생각하다 이대로 놔도 재밌을거 같다는 생각이.. 😅

<img src="https://user-images.githubusercontent.com/45554623/137627407-b279af7b-46f7-4388-bb2b-3736130f2c5d.png">





## (예정) Mobile Input porting



# What is the next?

1. 몬스터를 디자인과 함께 구현할 계획
   - ~~간단한 갤러그? 느낌으로 하는 게 어떠한지? AI를 구현하는 것은 어려운 일일듯..~~ 생각해봐야 할듯
   - ~~플레이어를 쫓아 자폭하는 기본~~ 완료
   - 보스 - 커다란 몸, 비교적 많은 체력, 일정 패턴 구사
   - 장애물들 - 파괴 가능
2.  아이템 상호작용, 아이템이라기보단 능력치가 증가하는 포션 같이 작용
   1. 베리어 생성
   2. ~~일시적? 공격/이동 속도 증가~~
   3. 일시적? 공격력/사거리 증가
   4. 일정 범위의 적들 느려지고 입는 데미지 증가
   5. 체력 회복, 최대 체력 증가
3. ~~완성까지 2주 더 빠를지도~~
4. ~~스테이지 선택 기능은 추가하지 않을 계획~~
   1. ~~하나의 스테이지에서 여러 웨이브가 있도록~~
5. Mobile touch input system porting

